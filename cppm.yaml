package:
    name: cppm
    version: 1.0.0
    authors: 8687lee@gmail.com InJaeLee
    type: bin 
        
compiler: 
    type: g++
    option: -std=c++17 -lstdc++fs -g -Wall -pthread -fPIC -O0 -Wunused-variable
    
builder: 
    type: make
    core: 2
    
user-cmake-script: 
    - cmake/cppm_install.cmake
    
binary:
    cppm:
        version: 1.0.0
        source:
            - src/
        dependencies:
            - boost
            - yaml-cpp
            - nieel 
thirdparty:
    boost: 
       build-type: static
       install: global
       version: 1.67.0
       url: https://dl.bintray.com/boostorg/release/1.67.0/source/boost_1_67_0.tar.gz 
       cmake-lib-name: Boost::boost
       
    yaml-cpp:
       build-type: static
       install: global
       url: https://github.com/jbeder/yaml-cpp.git
       find-cmake-value: YAML_CPP
       cmake-lib-name: yaml-cpp
       
    range-v3:
       build-type: header_only
       install: global
       url: https://github.com/ericniebler/range-v3.git
       cmake-lib-name: range-v3
       
    nieel:
       build-type: static
       version: 0.0.1
       install: global
       url: https://github.com/INJAE/nieel.git
       cmake-lib-name: nieel
            
list:
    - ls

include: 
    - cd include 
    - ls
         
src: 
    - cd src 
    - ls 

ninja-install:
    - git clone git://github.com/martine/ninja.git 
    - cd ninja && ./bootstrap.py 
    - sudo cp ninja /usr/local/bin/ 
    - sudo chmod a+rx /usr/local/bin/ninja 
              
gcc-install:
    - wget http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-8.1.0/gcc-8.1.0.tar.gz              
    - rm gcc-8.1.0.tar.gz
    - cd gcc-8.1.0
    - ./contrib/download_prerequisites 
    - mkdir build && cd build 
    - ../configure -v --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu --prefix=/usr/local/gcc-8.1 --enable-checking=release --enable-languages=c,c++,fortran --disable-multilib --program-suffix=-8.1
    - make -j 4               
    - sudo make install
             
clean: 
    - cd bin && sudo rm -rf *

nieel:
    - cd ../nieel && cppm build install 
    
nieelt:
    - cd ../nieel && ./run.sh
cp:
    - cp cmake/project_maker.cmake ../nieel/cmake
    - cp cmake/cmake_option.cmake ../nieel/cmake
    - cp cmake/project_makerv2.cmake ../nieel/cmake

shared-lib-setting: 
    - LD_LIBRARY_PATH=/usr/local/lib

build-cache-install:
    - sudo apt install ccache
    - export PATH=/usr/lib/ccache:$PATH
   
